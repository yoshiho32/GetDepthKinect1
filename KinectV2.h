#pragma once

//
// 深度センサ関連の処理
//

// Kinect 関連
#include <Windows.h>
#include <Kinect.h>

// 深度センサ関連の基底クラス
#include "DepthCamera.h"

class KinectV2 : public DepthCamera
{
	// センサの識別子
	static IKinectSensor *sensor;

	// デプスデータからカメラ座標を求めるときに用いる一時メモリ
	GLfloat(*position)[3];

	// カラーデータ
	IColorFrameReader *colorReader;

	// カラーデータの変換に用いる一時メモリ
	GLubyte *color;

	// 座標のマッピング
	ICoordinateMapper *coordinateMapper;

	// コピーコンストラクタ (コピー禁止)
	KinectV2(const KinectV2 &w);

	// 代入 (代入禁止)
	KinectV2 &operator=(const KinectV2 &w);

public:

	int counter;

	// デプスデータ
	IDepthFrameReader *depthReader;

	// コンストラクタ
	KinectV2();

	// デストラクタ
	virtual ~KinectV2();

	// デプスデータを取得する
	GLuint getDepth();

	// カメラ座標を取得する
	GLuint getPoint() const;

	// カラーデータを取得する
	GLuint getColor() const;

	// デプスデータの一つを取得する
	//GLuint takeOneDepth() const;

};
